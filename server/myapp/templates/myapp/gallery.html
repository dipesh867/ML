{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gallery- Motherland Academy School</title>
<link rel="stylesheet" href="{% static 'myapp/css/styles.css' %}">
<link rel="stylesheet" href="{% static 'myapp/css/animation.css' %}">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="{% static 'myapp/js/script.js' %}" defer></script>
  <style>
    /* Page-specific styles */
    .page-header {
      position: relative;
      height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      color: white;
      margin-top: 10vh;
    }
    
    .page-header-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
    }
    
    .page-header-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(rgba(220, 38, 38, 0), rgba(185, 28, 28, 0.8));
    }
    
    .page-header-content {
      position: relative;
      z-index: 10;
      text-align: center;
      max-width: 64rem;
      padding: 0 1rem;
    }
    
    .gallery-tabs {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 3rem;
    }
    
    .gallery-tab {
      padding: 0.75rem 1.5rem;
      background-color: var(--gray-50);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .gallery-tab:hover {
      background-color: var(--gray-200);
    }
    
    .gallery-tab.active {
      background-color: var(--primary);
      color: white;
    }
    
    .gallery {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
}

    .gallery-item {
    flex: 1 1 calc(33.333% - 1rem); /* 3 per row */
    max-width: calc(33.333% - 1rem);
    height: 250px;
}

    
    .gallery-item:hover {
      transform: translateY(-5px);
    }
    
    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .gallery-item:hover img {
      transform: scale(1.1);
    }
    
    .gallery-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
      color: white;
      padding: 1rem;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }
    
    .gallery-item:hover .gallery-caption {
      transform: translateY(0);
    }
    
    .gallery-caption h3 {
      margin: 0;
      font-size: 1.125rem;
      margin-bottom: 0.25rem;
    }
    
    .gallery-caption p {
      margin: 0;
      font-size: 0.875rem;
      opacity: 0.8;
    }
    @media (max-width: 900px) {
  .gallery-item {
      flex: 1 1 calc(50% - 1rem); /* 2 per row */
      max-width: calc(50% - 1rem);
  }
}

@media (max-width: 600px) {
  .gallery-item {
      flex: 1 1 100%; /* 1 per row */
      max-width: 100%;
  }
}

    /* Modal styles */
    .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.9);
    z-index: 99999 !important;   /* ‚Üê highest priority */
    overflow: auto;
    padding: 2rem;
}

    
    .modal-content {
    position: relative;
    z-index: 100000;
}

    
    .modal-image {
      width: 100%;
      top: 6vh;
      max-height: 80vh;
      object-fit: contain;
    }
    
    .modal-caption {
      color: white;
      text-align: center;
      padding: 1rem 0;
    }
    
  .modal-close {
    position: absolute;
    top: 15px;
    right: 25px;
    font-size: 2.2rem;
    cursor: pointer;
    z-index: 100001;
    color: white;
}


    
    .modal-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 50px;
      height: 50px;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 1.5rem;
      transition: background-color 0.3s ease;
    }
    
    .modal-nav:hover {
      background-color: rgba(255, 255, 255, 0.3);
    }
    
    .modal-prev {
      left: -70px;
    }
    
    .modal-next {
      right: -70px;
    }
    
    /* Enhanced Animation for Gallery Page */
    @keyframes zoomIn {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    .zoom-in {
      animation: zoomIn 0.5s ease-out forwards;
    }
    
    /* Reveal animation */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease-out;
    }
    
    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }
    
    .delay-100 { transition-delay: 0.1s; }
    .delay-200 { transition-delay: 0.2s; }
    .delay-300 { transition-delay: 0.3s; }
  </style>
</head>
<body>
  <!-- Include the Navbar -->
  {% include 'myapp/navbar.html' %}
  
  <!-- Page Header -->
  <header class="page-header">
    <div class="page-header-bg" style="background-image: url('https://images.unsplash.com/photo-1519331379826-f10be5486c6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');"></div>
    <div class="page-header-overlay"></div>
    <div class="page-header-content">
      <h1 class="hero-title slide-up text-shadow">Photo Gallery</h1>
      <p class="hero-subtitle fade-in text-shadow">
        Capturing moments and memories from our vibrant school community
      </p>
    </div>
  </header>
  
  <!-- Gallery Section -->
  <section class="section" style="background-color: white;">
    <div class="container">
      <div class="text-center" style="margin-bottom: 3rem;">
        <h2 class="section-title reveal">Our School in Pictures</h2>
        <p class="section-description reveal delay-100">
          Browse through images showcasing our facilities, events, and student life
        </p>
      </div>
      
      <!-- Gallery Filter Tabs -->
      <!-- <div class="gallery-tabs reveal delay-200">
        <div class="gallery-tab active" data-filter="all">All</div>
        <div class="gallery-tab" data-filter="campus">Campus</div>
        <div class="gallery-tab" data-filter="classroom">Classrooms</div>
        <div class="gallery-tab" data-filter="events">Events</div>
        <div class="gallery-tab" data-filter="sports">Sports</div>
        <div class="gallery-tab" data-filter="arts">Arts & Culture</div>
      </div> -->
        <!-- Events Images -->
<div class="gallery" id="gallery-wrapper">
    {% for event in events %}
        {% for img in event.images.all %}
            <div class="gallery-item" data-category="events">
                <img src="{{ img.image.url }}" alt="{{ event.event_name }}">
                <div class="gallery-caption">
                    <h3>{{ event.event_name }}</h3>
    <p>{{ event.description|default:'' }}</p>
                </div>
            </div>
        {% endfor %}
    {% endfor %}
</div>



        
        
  
  <!-- Image Modal -->
  <div class="modal" id="image-modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <img src="" class="modal-image" id="modal-image">
      <div class="modal-caption" id="modal-caption">
        <h3 id="modal-title"></h3>
        <p id="modal-description"></p>
      </div>
      <div class="modal-nav modal-prev" onclick="changeImage(-1)">&#10094;</div>
      <div class="modal-nav modal-next" onclick="changeImage(1)">&#10095;</div>
    </div>
  </div>
  
  
  
  <!-- CTA Section -->
  <section class="section gradient-bg">
    <div class="container" style="max-width: 800px; text-align: center;">
      <h2 class="section-title reveal" style="color: white;">Visit Our Campus</h2>
      <p style="color: rgba(255, 255, 255, 0.9); font-size: 1.25rem; margin-bottom: 2rem; line-height: 1.6;" class="reveal delay-100">
        Experience our vibrant community and facilities in person
      </p>
      <div class="reveal delay-200">
        <a href="{% url 'contact' %}" class="btn btn-lg" style="background-color: white; color: var(--primary); font-weight: 700;">
          Schedule a Tour
        </a>
      </div>
    </div>
  </section>
  
  <!-- Include the Footer -->
  {% include 'myapp/footer.html' %}
  
  <script>
    // Load the navbar and footer
    document.addEventListener('DOMContentLoaded', function() {
      // Load Navbar
      fetch('navbar.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('navbar-container').innerHTML = data;
          // Initialize navbar functionality after loading
          initNavbar();
        });
      
      // Load Footer
      fetch('footer.html')
        .then(response => response.text())
        .then(data => {
          document.getElementById('footer-container').innerHTML = data;
        });
      
      // Initialize gallery functionality
      initGallery();
      
      // Scroll reveal animation
      function revealOnScroll() {
        const reveals = document.querySelectorAll('.reveal');
        
        for (let i = 0; i < reveals.length; i++) {
          const windowHeight = window.innerHeight;
          const elementTop = reveals[i].getBoundingClientRect().top;
          const elementVisible = 150;
          
          if (elementTop < windowHeight - elementVisible) {
            reveals[i].classList.add('active');
          }
        }
      }
      
      window.addEventListener('scroll', revealOnScroll);
      revealOnScroll(); // Call once to check for elements in view on load
    });
    
    // Gallery and modal functionality
    let currentIndex = 0;
    let galleryItems = [];
    
    function initGallery() {
      // Gallery filtering
      const tabs = document.querySelectorAll('.gallery-tab');
      const items = document.querySelectorAll('.gallery-item');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          // Update active tab
          tabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          
          // Filter items
          const filter = this.getAttribute('data-filter');
          
          items.forEach(item => {
            const category = item.getAttribute('data-category');
            
            if (filter === 'all' || filter === category) {
              item.style.display = 'block';
            } else {
              item.style.display = 'none';
            }
          });
        });
      });
      
      // Modal functionality
      items.forEach((item, index) => {
        if (item.querySelector('img')) { // Only apply to image items, not video
          galleryItems.push(item);
          
          item.addEventListener('click', function() {
            const img = this.querySelector('img');
            const title = this.querySelector('.gallery-caption h3').textContent;
            const description = this.querySelector('.gallery-caption p').textContent;
            
            openModal(img.src, title, description, galleryItems.indexOf(this));
          });
        }
      });
    }
    
    function openModal(src, title, description, index) {
      const modal = document.getElementById('image-modal');
      const modalImg = document.getElementById('modal-image');
      const modalTitle = document.getElementById('modal-title');
      const modalDescription = document.getElementById('modal-description');
      
      modalImg.src = src;
      modalTitle.textContent = title;
      modalDescription.textContent = description;
      currentIndex = index;
      
      modal.style.display = 'block';
      modalImg.classList.add('zoom-in');
      
      // Remove animation class after animation completes
      setTimeout(() => {
        modalImg.classList.remove('zoom-in');
      }, 500);
    }
    
    function closeModal() {
      document.getElementById('image-modal').style.display = 'none';
    }
    
    function changeImage(step) {
      currentIndex += step;
      
      // Loop around if at the end or beginning
      if (currentIndex >= galleryItems.length) {
        currentIndex = 0;
      } else if (currentIndex < 0) {
        currentIndex = galleryItems.length - 1;
      }
      
      const item = galleryItems[currentIndex];
      const img = item.querySelector('img');
      const title = item.querySelector('.gallery-caption h3').textContent;
      const description = item.querySelector('.gallery-caption p').textContent;
      
      const modalImg = document.getElementById('modal-image');
      const modalTitle = document.getElementById('modal-title');
      const modalDescription = document.getElementById('modal-description');
      
      modalImg.classList.add('zoom-in');
      modalImg.src = img.src;
      modalTitle.textContent = title;
      modalDescription.textContent = description;
      
      // Remove animation class after animation completes
      setTimeout(() => {
        modalImg.classList.remove('zoom-in');
      }, 500);
    }
    
    // Close modal when clicking outside the image
    window.onclick = function(event) {
      const modal = document.getElementById('image-modal');
      if (event.target === modal) {
        closeModal();
      }
    }
    
    // Keyboard navigation for modal
    document.addEventListener('keydown', function(event) {
      const modal = document.getElementById('image-modal');
      
      if (modal.style.display === 'block') {
        if (event.key === 'ArrowLeft') {
          changeImage(-1);
        } else if (event.key === 'ArrowRight') {
          changeImage(1);
        } else if (event.key === 'Escape') {
          closeModal();
        }
      }
    });
  </script>
</body>
</html> 